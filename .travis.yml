language: node_js

node_js:
- "node"

install:
- npm install

script:
- npm run-script test-travis

after_success: cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js

deploy:
  - provider: script
    skip_cleanup: true
    script: bin/togemfury.sh
  - provider: s3
    access_key_id:
      secure: aaa
    secret_access_key:
      secure: bbb
    bucket: bucketeer-0657d779-f6ef-4fbe-8f88-5dfe9e308bbb
    skip_cleanup: true
    acl: public_read
    region: eu-west-1
    local_dir: dist
    upload-dir: public
